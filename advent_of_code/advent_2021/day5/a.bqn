input â† â€¢FLines "data.txt"
Split â† (â€¢Import "strings.bqn").Split

ParseNat â† {
  +Â´ (10 â‹† (âŒ½â†•â‰ ğ•©)) Ã— ğ•© - '0' 
}

ParseLine â† {
  âŸ¨a, bc, dâŸ© â† ',' Split ğ•©
  âŸ¨b, arrow, câŸ© â† ' ' Split bc
  (ParseNatÂ¨ (a â‹ˆ b)) â‹ˆ (ParseNatÂ¨ (c â‹ˆ d))
}

LineIncluding â† {
    LineIncluding âŸ¨âŸ¨a, bâŸ©, âŸ¨c, dâŸ©âŸ©: a = c ? aâŠ¸â‹ˆÂ¨ (b âŒŠ d) + â†• 1 + (| b - d) ;
    LineIncluding âŸ¨âŸ¨a, bâŸ©, âŸ¨c, dâŸ©âŸ©: b = d ? âŒ½Â¨ LineIncluding âŸ¨âŸ¨b, aâŸ©, âŸ¨d, câŸ©âŸ© ;

    LineIncluding âŸ¨âŸ¨a, bâŸ©, âŸ¨c, dâŸ©âŸ©: (a < c) âˆ§ (b < d) ? (<âŸ¨a, bâŸ©) + â‹ˆËœÂ¨(â†•1 + (c - a)) ;
    LineIncluding âŸ¨âŸ¨a, bâŸ©, âŸ¨c, dâŸ©âŸ©: (a > c) âˆ§ (b < d) ? (<âŸ¨a, bâŸ©) + (<âŸ¨-1, 1âŸ©) Ã— â‹ˆËœÂ¨(â†•1 + (a - c)) ;

    LineIncluding âŸ¨âŸ¨a, bâŸ©, âŸ¨c, dâŸ©âŸ©: (a > c) âˆ§ (b > d) ? LineIncluding âŸ¨âŸ¨c, dâŸ©, âŸ¨a, bâŸ©âŸ© ;
    LineIncluding âŸ¨âŸ¨a, bâŸ©, âŸ¨c, dâŸ©âŸ©: (a < c) âˆ§ (b > d) ? LineIncluding âŸ¨âŸ¨c, dâŸ©, âŸ¨a, bâŸ©âŸ©
}

# https://mathoverflow.net/questions/117390/polynomial-bijection-from-zxz-to-z
Bij â† {
  Bij âŸ¨n, mâŸ©: ((n+m) Ã— (n+m+1) Ã· 2) + m
}

Mark â† { (1âŠ¸+)âŒ¾(ğ•©âŠ¸âŠ‘) ğ•¨ }

HorizVert â† {
    (+Â´ =Â´ ğ•©) > 0
}
data â† ParseLineÂ¨ input
p1_data â† (HorizVertÂ¨ data) / data

m1 â†  BijÂ¨ âˆ¾ LineIncludingÂ¨ p1_data
m2 â†  BijÂ¨ âˆ¾ LineIncludingÂ¨ data

â€¢Show +Â´ (((âˆŠâŒ¾âŒ½) Ã— âŠ’) m1) > 0
â€¢Show +Â´ (((âˆŠâŒ¾âŒ½) Ã— âŠ’) m2) > 0
